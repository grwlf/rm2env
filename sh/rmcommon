#!/bin/sh

rmset() {
  if eval "test -z \"\$$1\"" ; then
    eval "$1='$2'"
  fi
}

RM_NOUSER="<INVALID_USER>"
RM_NOIP="<INVALID_IP>"
RM_NOPORT="<INVALID_PORT>"

if test -f "$(dirname "$0")/rmconfig" ; then
  . $(dirname "$0")/rmconfig
else
  rmset RM_XOCHITL $HOME/.xochitl
  rmset RM_SSH remarkable
  rmset RM_VPSSSH ""
  rmset RM_VPSRPORT "$RM_NOPORT"

  rmset RM_VPSIP "$RM_NOIP" # Optional
  rmset RM_VPSUSER "$RM_NOUSER" # Optional
  rmset RM_VPSPORT "$RM_NOPORT" # Optional
fi

rmecho() {
  echo "$@"
}
rmwarn() {
  echo "$@"
}

rmdie() {
  echo "$@" >&2
  exit 1
}

rmcheck() {
  if test -d "$RME_XOCHITL" ; then
    rmdie "RM_XOCHITL($RM_XOCHITL) is not a dir"
  fi
}
